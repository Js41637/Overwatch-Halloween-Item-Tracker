<sub-header></sub-header>

<div id="hero-container">
  <div id="hero-header">
    <div class="hero-overview">
      <div class="hero-image">
        <img src="{{ ::hero.id | heroImg:'career' }}" />
      </div>
      <div class="hero-info">
        <h2 class="hero-name">{{::hero.name}}</h2>
        <h3 class="hero-class">{{::hero.class}}</h2>
      </div>
    </div>
    <div class="options">
      <div class="toggle-grid btn btn-default" uib-tooltip="Toggle Grid View" ng-click="hero.toggleGrid()">Toggle Grid</div>
      <div class="select-all btn btn-default" uib-tooltip="Select all items" ng-click="hero.selectAll()">Select All</div>
    </div>
    <div class="hero-progress">
      <div class="hero-progress-bar" style="width: calc(0px + {{hero.totals.percentage}} - 4px); background-color: {{hero.colors.primary}}; border-top-color: {{hero.colors.highlight}}"></div>
      <span>{{hero.totals.selected}} / {{::hero.totals.total}}  Unlocks</span>
    </div>
  </div>
  <div class="hero-grid" ng-if="hero.gridView">
    <div ng-repeat="(type, items) in ::hero.items track by $index" id="{{type}}" class="section">
      <div class="section-header">
        <h2>{{type}} <small>{{hero.totals.groups[type].selected}}/{{::hero.totals.groups[type].total}}</small></h2>
      </div>
      <div
        class="item"
        ng-class="{selected: hero.isItemChecked(item, type)}"
        uib-tooltip="{{::item.name}}"
        tooltip-placement="top"
        ng-repeat="item in ::items track by $index"
        fancy-load="{{$index}}"
        ng-click="hero.selectItem(item, type)"
        lazy-background="{{hero.getImgUrl(item, type, hero.id, true)}}"
        no-loader="true">
      </div>
    </div>
  </div>
  <div class="hero-items" ng-if="!hero.gridView">
    <div ng-repeat="(type, items) in hero.items track by $index" id="{{type}}" class="section">
      <div class="section-header">
        <h2>{{::type}} <small>{{hero.totals.groups[type].selected}}/{{::hero.totals.groups[type].total}}</small></h2>
      </div>
      <div
        class="item {{::item.quality || 'unknown'}}"
        event="{{::item.event || 'none'}}"
        achievement="{{::item.achievement || 'false'}}"
        uib-tooltip-template="'imagePreviewTemplate.html'"
        tooltip-popup-delay="275"
        tooltip-class="img-preview"
        tooltip-enable="type !== 'voicelines'"
        tooltip-placement="auto"
        ng-repeat="item in ::items track by $index">
        <input type="checkbox" id="{{type + item.id}}" ng-checked="::item.standardItem || hero.checked[type][item.id]" ng-disabled="::item.standardItem" ng-change="hero.onSelect()" ng-model="hero.checked[type][item.id]">
        <label for="{{type + item.id}}">
          <h3 class="color-{{::item.quality || 'common'}}">{{::item.name}}</h3>
          <small class="color-cost">{{ ::item | itemPrice:type }}</small>
        </label>
      </div>
    </div>
  </div>
</div>


<script type="text/ng-template" id="imagePreviewTemplate.html">
  <tooltip-image-preview></image-preview>
</script>
